{% load static %}

<div class="col">
  <div class="card shadow-sm h-100">
    <!-- Изображение турнира -->
    {% if tournament.image %}
      <img src="{{ tournament.image.url }}" class="card-img-top" width="100%" height="225" alt="{{ tournament.title }}">
    {% else %}
      <img src="{% static 'image/img2.jpg' %}" class="card-img-top" width="100%" height="225" alt="Заглушка">
    {% endif %}

    <div class="card-body d-flex flex-column">
      <h5 class="card-title">{{ tournament.title }}</h5>
      
      <div class="d-flex justify-content-between align-items-center mb-3">
        <small class="text-body-secondary">
          {% for style in tournament.fighting_styles.all %}
            {{ style.name }}{% if not forloop.last %}, {% endif %}
          {% endfor %}
        </small>
        <small class="text-body-secondary ms-2 text-end">
          окончание регистрации {{ tournament.deadline|date:"d.m.Y" }}
        </small>
      </div>

      <div class="d-flex justify-content-between align-items-center mb-3">
        <small class="text-body-secondary" title="{{ tournament.location }}">
          {{ tournament.location|truncatechars:15 }}
        </small>
        <small class="text-body-secondary ms-2 text-end">
            {{ tournament.get_current_registration_info }}
        </small>
      </div>

      <div class="mt-auto d-flex justify-content-between align-items-center">
        <a href="{% url 'tournaments:tournament_detail' pk=tournament.id %}" 
           class="btn btn-sm btn-outline-secondary">
          Подробнее
        </a>
        <small class="text-body-secondary fw-bold ms-2 text-end">
          {% if tournament.get_current_registration_price %}
            {{ tournament.get_current_registration_price|default:"-" }} ₽
          {% else %}
            Завершено
          {% endif %}
        </small>
      </div>
    </div>
  </div>
</div>